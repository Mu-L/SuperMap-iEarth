# 简介

基于Unity WebAssembly 技术，实现三维GIS发布到Web端的功能。现支持Unity2019版本发布WebGL，支持球面场景和平面场景、图层管理、添加在线图层、三维分析功能、以及量算功能。


# 功能模块

## 图层加载：
1. 公共服务加载功能：根据配置好的场景图层对象，一次性添加多个图层构建完整的场景。
2. 自定义服务加载功能：根据服务地址添加模型，影像或地形图层。

## 图层管理：
1. 图层树形展示功能：展示场景中存在的所有图层并分类，支持控制图层的显隐，点击定位和删除功能。


## 三维空间分析：
1. 新增“可视域分析”功能：用于在场景中，相对于某个观察点，基于一定的水平视角、垂直视角及指定范围半径，分析出该区域内可视与不可视区域，并输出结果。
2. 新增“天际线分析”功能：根据观察点，生成当前场景窗口中建筑物顶端边缘与天空的分离线。并支持输出二维天际线。可用于城市规划设计中的建筑物限高分析、分析建筑物对天际线的影响等。
3. 新增支持地形的“淹没分析”功能：根据指定的最大、最小高程值及淹没速度，动态模拟某区域水位由最小高程涨到最大高程的淹没过程。
4. 新增“坡度坡向分析”功能：用于计算栅格数据集中各像元的坡度值，及像元坡度面的朝向。

## 量算功能：
1. 新增“空间距离量算”功能：根据起点和终点的空间位置计算出两者之间的空间距离。
2. 新增“水平距离量算”功能：根据起点和终点的位置计算出两者之间的水平距离。
3. 新增“高度量算”功能：用来在场景中进行高度量算。
4. 新增“面积量算”功能：用来在场景中进行面积量算。
5. 新增“参考线”功能：用来在场景中显示量算高度的参考线。

## 查询功能
1. 新增“属性查询”功能：用于场景中模型的属性查询，选择当前需要查询的图层，然后点击图层上模型对象，展现选中对象的属性列表。


# 结构:

1. public/js_module：JS API层，包括Unity WASM，资源包以及JS接口

2. packages： 组件层，基于Vue封装的组件库

3. src： 应用层，对应iEarth的功能模块

# 使用

+ 用户下载[SuperMap三维GIS插件-Unity产品包](./后续提供.rar)，解压缩到`js_module`文件夹下。

+ bash环境下执行如下操作：

``` bash
# 安装依赖
npm install

# 启动服务打开 localhost:3000
npm run dev

```
