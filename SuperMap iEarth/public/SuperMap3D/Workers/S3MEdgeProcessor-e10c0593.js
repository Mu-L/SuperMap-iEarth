define(["exports","./S3MPixelFormat-4f2b7689","./when-7d8885d2","./Cartographic-9ee1f1bd","./Buffer-7b100757","./PrimitiveType-3a37fdd9","./IndexDatatype-6f66284e","./ComponentDatatype-c2578c27"],(function(e,t,r,n,a,i,s,o){"use strict";
//! Use DXT1 compression.
function f(e,t,r,n){var a=e|t<<8,i=a>>11&31,s=a>>5&63,o=31&a;return r[n+0]=i<<3|i>>2,r[n+1]=s<<2|s>>4,r[n+2]=o<<3|o>>2,r[n+3]=255,a}function u(e,t,r,n){var a=0;0!=(6&n)&&(a=8),function(e,t,r,n){for(var a=new Uint8Array(16),i=f(t[r+0],t[r+1],a,0),s=f(t[r+2],t[r+3],a,4),o=0;o<3;o++){var u=a[o],c=a[4+o];n&&i<=s?(a[8+o]=(u+c)/2,a[12+o]=0):(a[8+o]=(2*u+c)/3,a[12+o]=(u+2*c)/3)}a[11]=255,a[15]=n&&i<=s?0:255;var y=new Uint8Array(16);for(o=0;o<4;++o){var p=t[r+4+o];y[4*o+0]=3&p,y[4*o+1]=p>>2&3,y[4*o+2]=p>>4&3,y[4*o+3]=p>>6&3}for(o=0;o<16;++o)for(var d=4*y[o],l=0;l<4;++l)e[4*o+l]=a[d+l]}(e,t,r+a,0!=(1&n)),0!=(2&n)?function(e,t,r){for(var n=0;n<8;++n){var a=bytes[r+n],i=15&a,s=240&a;e[8*n+3]=i|i<<4,e[8*n+7]=s|s>>4}}(e,0,r):0!=(4&n)&&function(e,t,r){var n=t[r+0],a=t[r+1],i=new Uint8Array(8);if(i[0]=n,i[1]=a,n<=a){for(var s=1;s<5;++s)i[1+s]=((5-s)*n+s*a)/5;i[6]=0,i[7]=255}else for(s=1;s<7;++s)i[1+s]=((7-s)*n+s*a)/7;var o=new Uint8Array(16),f=(r+=2,0);for(s=0;s<2;++s){for(var u=0,c=0;c<3;++c)u|=t[r++]<<8*c;for(c=0;c<8;++c){var y=u>>3*c&7;o[f++]=y}}for(s=0;s<16;++s)e[4*s+3]=i[o[s]]}(e,t,r)}function c(e){}c.decode=function(e,r,n,a,i){if(null!=e&&null!=a&&0!=n&&0!=r){var s=0;1&(s=i>t.S3MPixelFormat.BGR||i===t.S3MPixelFormat.LUMINANCE_ALPHA?4:33)&&32&s?function(e,t,r,n){for(var a=new Uint16Array(4),i=e,s=0,o=0,f=0,u=0,c=0,y=0,p=0,d=0,l=0,v=t/4,x=r/4,A=0;A<x;A++)for(var h=0;h<v;h++)f=4*((x-A)*v+h),a[0]=n[f],a[1]=n[f+1],u=31&a[0],c=2016&a[0],y=63488&a[0],p=31&a[1],d=2016&a[1],l=63488&a[1],a[2]=5*u+3*p>>3|5*c+3*d>>3&2016|5*y+3*l>>3&63488,a[3]=5*p+3*u>>3|5*d+3*c>>3&2016|5*l+3*y>>3&63488,s=n[f+2],i[o=4*A*t+4*h]=a[3&s],i[o+1]=a[s>>2&3],i[o+2]=a[s>>4&3],i[o+3]=a[s>>6&3],i[o+=t]=a[s>>8&3],i[o+1]=a[s>>10&3],i[o+2]=a[s>>12&3],i[o+3]=a[s>>14],s=n[f+3],i[o+=t]=a[3&s],i[o+1]=a[s>>2&3],i[o+2]=a[s>>4&3],i[o+3]=a[s>>6&3],i[o+=t]=a[s>>8&3],i[o+1]=a[s>>10&3],i[o+2]=a[s>>12&3],i[o+3]=a[s>>14]}
/*! @brief Decompresses an image in memory.

     @param rgba		Storage for the decompressed pixels.
     @param width	The width of the source image.
     @param height	The height of the source image.
     @param blocks	The compressed DXT blocks.
     @param flags	Compression flags.

     The decompressed pixels will be written as a contiguous array of width*height
     16 rgba values, with each component as 1 byte each. In memory this is:

     { r1, g1, b1, a1, .... , rn, gn, bn, an } for n = width*height

     The flags parameter should specify either kDxt1, kDxt3 or kDxt5 compression,
     however, DXT1 will be used by default if none is specified. All other flags
     are ignored.

     Internally this function calls squish::Decompress for each block.
     */(e,r,n,a):function(e,t,r,n,a){for(var i=0!=(1&a)?8:16,s=0,o=0;o<r;o+=4)for(var f=0;f<t;f+=4){var c=new Uint8Array(64);u(c,n,s,a);for(var y=0,p=0;p<4;++p)for(var d=0;d<4;++d){var l=f+d,v=o+p;if(l<t&&v<r)for(var x=4*(t*(r-v)+l),A=0;A<4;++A)e[x++]=c[y++];else y+=4}s+=i}}(e,r,n,a,s)}};var y=Object.freeze({encNONE:0,enrS3TCDXTN:14,enrPVRTPF_PVRTC2:19,enrPVRTPF_PVRTC:20,enrPVRTPF_PVRTC_4bpp:21,enrPVRTPF_ETC1:22}),p=Object.freeze({SVC_Vertex:1,SVC_Normal:2,SVC_VertexColor:4,SVC_SecondColor:8,SVC_TexutreCoord:16,SVC_TexutreCoordIsW:32});function d(){}d.computeNeighbors=function(e,t){for(var r=e.length/3,n=new Uint32Array(t+1),a=new Uint32Array(t+1),i=function(e,t){e<t?n[e+1]++:a[t+1]++},s=0;s<r;s++){var o=e[3*s],f=e[3*s+1],u=e[3*s+2];i(o,f),i(f,u),i(u,o)}for(s=f=o=0;s<t;s++)u=n[s+1],i=a[s+1],n[s+1]=o,a[s+1]=f,o+=u,f+=i;var c=new Uint32Array(6*r),y=n[t];for(i=function(e,t,r){if(e<t){var i=n[e+1]++;c[2*i]=t,c[2*i+1]=r}else i=a[t+1]++,c[2*y+2*i]=e,c[2*y+2*i+1]=r},s=0;s<r;s++)o=e[3*s],f=e[3*s+1],u=e[3*s+2],i(o,f,s),i(f,u,s),i(u,o,s);for(o=function(e,t){var r=2*e;for(e=t-e,t=1;t<e;t++){for(var n=c[r+2*t],a=c[r+2*t+1],i=t-1;0<=i&&c[r+2*i]>n;i--)c[r+2*i+2]=c[r+2*i],c[r+2*i+3]=c[r+2*i+1];c[r+2*i+2]=n,c[r+2*i+3]=a}},s=0;s<t;s++)o(n[s],n[s+1]),o(y+a[s],y+a[s+1]);var p=new Int32Array(3*r),d=function(t,r){return t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1};for(r=function(e,t){e=d(e,t),p[3*t+e]=-1},o=function(e,t,r,n){e=d(e,t),p[3*t+e]=n,r=d(r,n),p[3*n+r]=t},s=0;s<t;s++){f=n[s],u=n[s+1],i=a[s];for(var l=a[s+1];f<u&&i<l;){var v=c[2*f],x=c[2*y+2*i];v===x?(o(s,c[2*f+1],x,c[2*y+2*i+1]),f++,i++):v<x?(r(s,c[2*f+1]),f++):(r(x,c[2*y+2*i+1]),i++)}for(;f<u;)r(s,c[2*f+1]),f++;for(;i<l;)r(x=c[2*y+2*i],c[2*y+2*i+1]),i++}return p};var l=null;function v(){}function x(e){return e*Math.PI/180}d.deduplicate=function(e,t,r,n,a){void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=e.byteLength/(4*t)),e=new Uint32Array(e,n,a*t),n=new Uint32Array(a);var i=Math.floor(1.1*a)+1;(null==l||l.length<2*i)&&(l=new Uint32Array(function(e){--e;for(var t=1;32>t;t<<=1)e|=e>>t;return e+1}(2*i)));for(var s=0;s<2*i;s++)l[s]=0;var o=0,f=0!==r?Math.ceil(7.84*1.96/(r*r)*r*(1-r)):a;for(s=0;s<a;s++){if(s===f){if((c=1-o/s)+1.96*Math.sqrt(c*(1-c)/s)<r)return null;f*=2}for(var u,c=s*t,y=u=0;y<t;y++)u=(u=e[c+y]+u|0)+(u<<11)+(u>>>2)|0;y=(u>>>=0)%i;for(var p=o;0!==l[2*y+1];){if(l[2*y]===u){var d=l[2*y+1]-1,v=d*t;e:{for(var x=0;x<t;x++)if(e[c+x]!==e[v+x]){v=!1;break e}v=!0}if(v){p=n[d];break}}++y>=i&&(y-=i)}p===o&&(l[2*y]=u,l[2*y+1]=s+1,o++),n[s]=p}if(0!==r&&1-o/a<r)return null;for(r=new Uint32Array(t*o),s=o=0;s<a;s++)if(n[s]===o){for(i=e,f=s*t,c=r,u=o*t,y=t,p=0;p<y;p++)c[u+p]=i[f+p];o++}return{buffer:r.buffer,indices:n,uniqueCount:o}};var A=x(4),h=x(35),m=Math.cos(h),C=Math.cos(A);var b={position0:new n.Cartesian3,position1:new n.Cartesian3,faceNormal0:new n.Cartesian3,faceNormal1:new n.Cartesian3,cosAngle:0},D=new n.Cartesian3,g=new n.Cartesian3;function B(e,t){var r,a=(r=e.cosAngle,Math.acos(1<r?1:-1>r?-1:r));return function(e,t,r){var n=r.x-t.x,a=r.y-t.y;(r=n*n+a*a+(t=r.z-t.z)*t)?(r=1/Math.sqrt(r),e.x=n*r,e.y=a*r,e.z=t*r):(e.x=0,e.y=0,e.z=0)}(g,e.position1,e.position0),n.Cartesian3.cross(e.faceNormal0,e.faceNormal1,D),a*(0<n.Cartesian3.dot(D,g)?-1:1)>t}var I=new n.Cartesian3,z=new n.Cartesian3,T=new n.Cartesian3;function S(e){var t=e.x*e.x+e.y*e.y+e.z*e.z;t>0&&(t=1/Math.sqrt(t),e.x*=t,e.y*=t,e.z*=t)}function w(e){}function P(e){if(r.defined(e.cachedSidenessVertexBuffer))return e.cachedSidenessVertexBuffer;var t=new Float32Array(8),n=0;return t[n++]=0,t[n++]=0,t[n++]=0,t[n++]=1,t[n++]=1,t[n++]=1,t[n++]=1,t[n++]=0,e.cachedSidenessVertexBuffer=a.Buffer.createVertexBuffer({context:e,typedArray:t,usage:a.BufferUsage.STATIC_DRAW}),e.cachedSidenessVertexBuffer.vertexArrayDestroyable=!1,e.cachedSidenessVertexBuffer}function V(e,t){for(var r,a,i,s=t.componentsPerAttribute,o=e.vertCompressConstant,f=new n.Cartesian3(e.minVerticesValue.x,e.minVerticesValue.y,e.minVerticesValue.z),u=new Uint16Array(t.typedArray.buffer,t.typedArray.byteOffset,t.typedArray.byteLength/2),c=new Float32Array(3*e.verticesCount),y=0;y<e.verticesCount;y++)r=u[s*y]*o+f.x,a=u[s*y+1]*o+f.y,i=u[s*y+2]*o+f.z,c[3*y]=r,c[3*y+1]=a,c[3*y+2]=i;return c}v.extractEdges=function(e){var t=e.vertices,r=e.dim,a=b,i=a.position0,s=a.position1,o=a.faceNormal0,f=a.faceNormal1,u=function(e){for(var t=e.faces.length/3,r=e.vertices,a=e.dim,i=e.faces,s=new Float32Array(3*t),o=0;o<t;o++){var f=i[3*o+0],u=i[3*o+1],c=i[3*o+2];I.x=r[a*f],I.y=r[a*f+1],I.z=r[a*f+2],z.x=r[a*u],z.y=r[a*u+1],z.z=r[a*u+2],T.x=r[a*c],T.y=r[a*c+1],T.z=r[a*c+2],n.Cartesian3.subtract(z,I,z),n.Cartesian3.subtract(T,I,T),n.Cartesian3.cross(z,T,I),S(I),s[3*o+0]=I.x,s[3*o+1]=I.y,s[3*o+2]=I.z}return s}(e),c=function(e){var t=e.faces.length/3,r=e.faces,n=e.neighbors,a=0,i=0;for(i=0;i<t;i++){var s=n[3*i+0],o=n[3*i+1],f=n[3*i+2],u=r[3*i+0],c=r[3*i+1],y=r[3*i+2];a+=-1===s||u<c?1:0,a+=-1===o||c<y?1:0,a+=-1===f||y<u?1:0}var p=new Int32Array(4*a),d=0;for(i=0;i<t;i++)s=n[3*i+0],o=n[3*i+1],f=n[3*i+2],u=r[3*i+0],c=r[3*i+1],y=r[3*i+2],(-1===s||u<c)&&(p[d++]=u,p[d++]=c,p[d++]=i,p[d++]=s),(-1===o||c<y)&&(p[d++]=c,p[d++]=y,p[d++]=i,p[d++]=o),(-1===f||y<u)&&(p[d++]=y,p[d++]=u,p[d++]=i,p[d++]=f);return p}(e),y=c.length/4,p=new Float32Array(9*y),d=0,l=new Float32Array(12*y),v=0,x=0,h=0,D=function(e,t){0===t&&(t=e,e=0);for(var r=Array(t-e),n=e;n<t;n++)r[n-e]=n;return r}(0,y),g=new Float32Array(y);g.forEach((function(e,a,o){var f=c[4*a+0],u=c[4*a+1];i.x=t[f*r],i.y=t[f*r+1],i.z=t[f*r+2],s.x=t[u*r],s.y=t[u*r+1],s.z=t[u*r+2],o[a]=n.Cartesian3.distance(i,s)})),D.sort((function(e,t){return g[t]-g[e]}));for(var w=[],P=[],V=0;V<y;V++){var L=D[V],O=g[L],F=c[4*L+0],N=c[4*L+1],U=c[4*L+2],E=c[4*L+3],M=-1===E;if(i.x=t[F*r],i.y=t[F*r+1],i.z=t[F*r+2],s.x=t[N*r],s.y=t[N*r+1],s.z=t[N*r+2],M)o.x=u[3*U],o.y=u[3*U+1],o.z=u[3*U+2],f.x=o.x,f.y=o.y,f.z=o.z,a.cosAngle=n.Cartesian3.dot(o,f);else if(o.x=u[3*U],o.y=u[3*U+1],o.z=u[3*U+2],f.x=u[3*E],f.y=u[3*E+1],f.z=u[3*E+2],a.cosAngle=n.Cartesian3.dot(o,f),a.cosAngle>C)continue;x+=O,h++,M||a.cosAngle<m?(p[d++]=a.position0.x,p[d++]=a.position0.y,p[d++]=a.position0.z,p[d++]=a.position1.x,p[d++]=a.position1.y,p[d++]=a.position1.z,p[d++]=a.faceNormal0.x,p[d++]=a.faceNormal0.y,p[d++]=a.faceNormal0.z,w.push(O)):B(a,A)&&(l[v++]=a.position0.x,l[v++]=a.position0.y,l[v++]=a.position0.z,l[v++]=a.position1.x,l[v++]=a.position1.y,l[v++]=a.position1.z,l[v++]=a.faceNormal0.x,l[v++]=a.faceNormal0.y,l[v++]=a.faceNormal0.z,l[v++]=a.faceNormal1.x,l[v++]=a.faceNormal1.y,l[v++]=a.faceNormal1.z,P.push(O))}p=p.slice(0,d),l=l.slice(0,v);var _=x/h,R=w.length,q=P.length;return{regular:{instancesData:p,instanceCount:R,edgeLength:R*_},silhouette:{instancesData:l,instanceCount:q,edgeLength:q*_},averageEdgeLength:_}},w.RegularInstanceStride=12,w.SilhouetteInstanceStride=15,w.createEdgeData=function(e,t,n){if(0==t.length)return null;var a,i=t[0];a=0===i.indexType?new Uint16Array(i.indicesTypedArray.buffer,i.indicesTypedArray.byteOffset,i.indicesTypedArray.byteLength/2):new Uint32Array(i.indicesTypedArray.buffer,i.indicesTypedArray.byteOffset,i.indicesTypedArray.byteLength/4);var s=w.extractEdgeInformation(e,!1,a),o=v.extractEdges(s);return r.defined(n)&&(r.defined(o.regular.instancesData)&&n.push(o.regular.instancesData.buffer),r.defined(o.silhouette.instancesData)&&n.push(o.silhouette.instancesData.buffer)),o},w.createIndexBuffer=function(e){return r.defined(e.cachedSidenessIndexBuffer)||(e.cachedSidenessIndexBuffer=a.Buffer.createIndexBuffer({context:e,typedArray:(t=new Uint16Array(6),n=0,t[n++]=2,t[n++]=1,t[n++]=0,t[n++]=3,t[n++]=2,t[n++]=0,t),usage:a.BufferUsage.STATIC_DRAW,indexDatatype:s.IndexDatatype.UNSIGNED_SHORT}),e.cachedSidenessIndexBuffer.vertexArrayDestroyable=!1),e.cachedSidenessIndexBuffer;var t,n},w.createRegularEdgeAttributes=function(e,t){if(r.defined(t.instancesData)&&0!=t.instancesData.length){var n={},i=[];t.attributeLocations=n,t.attributes=i;var s=a.Buffer.createVertexBuffer({context:e,typedArray:t.instancesData,usage:a.BufferUsage.STATIC_DRAW});t.instancesData=null;var f=o.ComponentDatatype.getSizeInBytes(o.ComponentDatatype.FLOAT),u=P(e),c=0;n.aSideness=c++,i.push({index:n.aSideness,vertexBuffer:u,componentsPerAttribute:2,componentDatatype:o.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*o.ComponentDatatype.getSizeInBytes(o.ComponentDatatype.FLOAT),normalize:!1});var y=w.RegularInstanceStride,p=0;n.aPosition0=c++,i.push({index:n.aPosition0,vertexBuffer:s,componentsPerAttribute:3,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:f*p,strideInBytes:f*y,instanceDivisor:1}),p+=3,n.aPosition1=c++,i.push({index:n.aPosition1,vertexBuffer:s,componentsPerAttribute:3,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:f*p,strideInBytes:f*y,instanceDivisor:1}),p+=3,n.aNormal=c++,i.push({index:n.aNormal,vertexBuffer:s,componentsPerAttribute:3,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*p,strideInBytes:f*y,instanceDivisor:1}),p+=3,n.batchId=c++,i.push({index:n.batchId,vertexBuffer:s,componentsPerAttribute:1,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*p,strideInBytes:f*y,instanceDivisor:1}),p+=1,n.aVariantStroke=c++,i.push({index:n.aVariantStroke,vertexBuffer:s,componentsPerAttribute:1,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*p,strideInBytes:f*y,instanceDivisor:1}),p+=1,n.aVariantExtension=c++,i.push({index:n.aVariantExtension,vertexBuffer:s,componentsPerAttribute:1,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*p,strideInBytes:f*y,instanceDivisor:1}),p+=1}},w.createSilhouetteEdgeAttributes=function(e,t){if(r.defined(t.instancesData)&&0!=t.instancesData.length){var n={},i=[];t.attributeLocations=n,t.attributes=i;var s=a.Buffer.createVertexBuffer({context:e,typedArray:t.instancesData,usage:a.BufferUsage.STATIC_DRAW});t.instancesData=null;var f=o.ComponentDatatype.getSizeInBytes(o.ComponentDatatype.FLOAT),u=0;n.aSideness=u++,i.push({index:n.aSideness,vertexBuffer:P(e),componentsPerAttribute:2,componentDatatype:o.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*f,normalize:!1});var c=w.SilhouetteInstanceStride,y=0;n.aPosition0=u++,i.push({index:n.aPosition0,vertexBuffer:s,componentsPerAttribute:3,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:f*y,strideInBytes:f*c,instanceDivisor:1}),y+=3,n.aPosition1=u++,i.push({index:n.aPosition1,vertexBuffer:s,componentsPerAttribute:3,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:f*y,strideInBytes:f*c,instanceDivisor:1}),y+=3,n.aNormalA=u++,i.push({index:n.aNormalA,vertexBuffer:s,componentsPerAttribute:3,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*y,strideInBytes:f*c,instanceDivisor:1}),y+=3,n.aNormalB=u++,i.push({index:n.aNormalB,vertexBuffer:s,componentsPerAttribute:3,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*y,strideInBytes:f*c,instanceDivisor:1}),y+=3,n.batchId=u++,i.push({index:n.batchId,vertexBuffer:s,componentsPerAttribute:1,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*y,strideInBytes:f*c,instanceDivisor:1}),y+=1,n.aVariantStroke=u++,i.push({index:n.aVariantStroke,vertexBuffer:s,componentsPerAttribute:1,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*y,strideInBytes:f*c,instanceDivisor:1}),y+=1,n.aVariantExtension=u++,i.push({index:n.aVariantExtension,vertexBuffer:s,componentsPerAttribute:1,componentDatatype:o.ComponentDatatype.FLOAT,normalize:!0,offsetInBytes:f*y,strideInBytes:f*c,instanceDivisor:1}),y+=1}},w.extractEdgeInformation=function(e,t,n){var a,i=e.attrLocation.aPosition,s=e.vertexAttributes[i],o=r.defined(e.nCompressOptions)&&(e.nCompressOptions&p.SVC_Vertex)===p.SVC_Vertex,f=s.componentsPerAttribute;o?(f=3,a=V(e,s)):a=new Float32Array(s.typedArray.buffer,s.typedArray.byteOffset,s.typedArray.byteLength/4);var u=a.length/f;if(t&&n)return{faces:n,neighbors:d.computeNeighbors(n,u),vertices:a,dim:f};var c,y=s.typedArray.buffer;c=o?a.buffer:y.slice(s.typedArray.byteOffset,s.typedArray.byteOffset+s.typedArray.byteLength);var l=d.deduplicate(c,f),v=w.selectIndexData(l.indices,n);return{faces:v,neighbors:d.computeNeighbors(v,l.uniqueCount),vertices:new Float32Array(l.buffer),dim:f}},w.selectIndexData=function(e,t){if(t){t=t.slice();for(var r=0;r<t.length;r++)t[r]=e[t[r]];return t}return e};var L=new n.Cartesian3,O=new n.Cartesian3,F=new n.Cartesian3,N=new n.Cartesian3,U=new n.Cartesian3,E=new n.Cartesian3,M=new n.Cartesian3,_=new n.Cartesian3;function R(e,t){function n(e,t,r){var n=48217*e%2147483647,a=t+n/2147483647*(r-=t);return{seed:n,result:Math.round(a)}}var a=function(e,t){var r=new Float32Array(6),n=new Uint32Array(r.buffer),a=new Uint32Array(1);r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=t.x,r[4]=t.y,r[5]=t.z,a[0]=5381;for(var i=0;i<n.length;i++)a[0]=31*a[0]+n[i];return a[0]}(e,t);r.defined(a)||(a=2147483647*Math.random());var i=n(a,0,255);a=i.seed,i.result,a=(i=n(a,0,5)).seed;var s=i.result;i=function(e){var t=48217*e%2147483647;return{seed:t,result:t/2147483646}}(a),a=i.seed;var o=i.result;return o=-(1-Math.min(o/.7,1))+Math.max(0,o-.7)/(1-.7),{variantStroke:s,variantExtension:o=255*(Math.abs(o)**1.2*(0>o?-1:1)*.5+.5)}}w.createEdgeDataByIndices=function(e,t){var a,i,s=e.attrLocation.aPosition,o=e.vertexAttributes[s],f=r.defined(e.nCompressOptions)&&(e.nCompressOptions&p.SVC_Vertex)===p.SVC_Vertex,u=o.componentsPerAttribute;f?(u=3,a=V(e,o)):a=new Float32Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/4);for(var c=[],y=[],d=(i=0===t.indexType?new Uint16Array(t.indicesTypedArray.buffer,t.indicesTypedArray.byteOffset,t.indicesTypedArray.byteLength/2):new Uint32Array(t.indicesTypedArray.buffer,t.indicesTypedArray.byteOffset,t.indicesTypedArray.byteLength/4)).length,l=0,v=0,x=4*Math.floor(d/4);v<x;v+=4){var A=i[v],h=i[v+1],m=i[v+2],C=i[v+3];if(L.x=a[u*A],L.y=a[u*A+1],L.z=a[u*A+2],O.x=a[u*h],O.y=a[u*h+1],O.z=a[u*h+2],F.x=a[u*m],F.y=a[u*m+1],F.z=a[u*m+2],N.x=a[u*C],N.y=a[u*C+1],N.z=a[u*C+2],!(n.Cartesian3.equals(O,F)||n.Cartesian3.equals(O,N)||n.Cartesian3.equals(O,L)||n.Cartesian3.equals(F,L)||n.Cartesian3.equals(N,L))){if(m===C){if(n.Cartesian3.subtract(O,L,U),n.Cartesian3.subtract(F,L,E),n.Cartesian3.cross(U,E,U),n.Cartesian3.equals(U,n.Cartesian3.ZERO))continue;n.Cartesian3.normalize(U,U),c.push(L.x),c.push(L.y),c.push(L.z),c.push(O.x),c.push(O.y),c.push(O.z),c.push(U.x),c.push(U.y),c.push(U.z),c.push(A);var b=(g=R(L,O)).variantStroke,D=g.variantExtension;c.push(b),c.push(D)}else{if(n.Cartesian3.subtract(O,L,U),n.Cartesian3.subtract(F,L,E),n.Cartesian3.cross(U,E,U),n.Cartesian3.equals(U,n.Cartesian3.ZERO))continue;if(n.Cartesian3.normalize(U,U),n.Cartesian3.subtract(O,L,M),n.Cartesian3.subtract(N,L,_),n.Cartesian3.cross(_,M,M),n.Cartesian3.equals(M,n.Cartesian3.ZERO))continue;n.Cartesian3.normalize(M,M),y.push(L.x),y.push(L.y),y.push(L.z),y.push(O.x),y.push(O.y),y.push(O.z),y.push(U.x),y.push(U.y),y.push(U.z),y.push(M.x),y.push(M.y),y.push(M.z),y.push(A);var g;b=(g=R(L,O)).variantStroke,D=g.variantExtension;y.push(b),y.push(D)}l+=n.Cartesian3.distance(L,O)}}var B=l/(d/4),I=c.length/w.RegularInstanceStride,z=y.length/w.SilhouetteInstanceStride;return{regular:{instancesData:new Float32Array(c),instanceCount:I,edgeLength:I*B},silhouette:{instancesData:new Float32Array(y),instanceCount:z,edgeLength:z},averageEdgeLength:B}},e.DXTTextureDecode=c,e.S3MCompressType=y,e.S3MEdgeProcessor=w,e.VertexCompressOption=p}));
