define(["exports","./Cartographic-bd336518","./Check-7b2a090c","./when-b60132fc","./Cartesian2-b18a5d2b","./Math-09b0b739"],(function(t,a,i,n,e,s){"use strict";function r(t,a,i,n,e,s,r){var h=function(t,a){return t*a*(4+t*(4-3*a))/16}(t,i);return(1-h)*t*a*(n+h*e*(r+h*s*(2*r*r-1)))}var h=new a.Cartesian3,o=new a.Cartesian3;function d(t,i,n,e){a.Cartesian3.normalize(e.cartographicToCartesian(i,o),h),a.Cartesian3.normalize(e.cartographicToCartesian(n,o),o),function(t,a,i,n,e,h,o){var d,c,u,M,g,l=(a-i)/a,_=h-n,p=Math.atan((1-l)*Math.tan(e)),f=Math.atan((1-l)*Math.tan(o)),v=Math.cos(p),m=Math.sin(p),C=Math.cos(f),H=Math.sin(f),b=v*C,O=v*H,S=m*H,q=m*C,U=_,w=s.CesiumMath.TWO_PI,A=Math.cos(U),R=Math.sin(U);do{A=Math.cos(U),R=Math.sin(U);var y,E=O-q*A;u=Math.sqrt(C*C*R*R+E*E),c=S+b*A,d=Math.atan2(u,c),0===u?(y=0,M=1):M=1-(y=b*R/u)*y,w=U,g=c-2*S/M,isNaN(g)&&(g=0),U=_+r(l,y,M,d,u,c,g)}while(Math.abs(U-w)>s.CesiumMath.EPSILON12);var P=M*(a*a-i*i)/(i*i),x=P*(256+P*(P*(74-47*P)-128))/1024,D=g*g,N=i*(1+P*(4096+P*(P*(320-175*P)-768))/16384)*(d-x*u*(g+x*(c*(2*D-1)-x*g*(4*u*u-3)*(4*D-3)/6)/4)),T=Math.atan2(C*R,O-q*A),z=Math.atan2(v*R,O*A-q);t._distance=N,t._startHeading=T,t._endHeading=z,t._uSquared=P}(t,e.maximumRadius,e.minimumRadius,i.longitude,i.latitude,n.longitude,n.latitude),t._start=a.Cartographic.clone(i,t._start),t._end=a.Cartographic.clone(n,t._end),t._start.height=0,t._end.height=0,function(t){var a=t._uSquared,i=t._ellipsoid.maximumRadius,n=t._ellipsoid.minimumRadius,e=(i-n)/i,s=Math.cos(t._startHeading),r=Math.sin(t._startHeading),h=(1-e)*Math.tan(t._start.latitude),o=1/Math.sqrt(1+h*h),d=o*h,c=Math.atan2(h,s),u=o*r,M=u*u,g=1-M,l=Math.sqrt(g),_=a/4,p=_*_,f=p*_,v=p*p,m=1+_-3*p/4+5*f/4-175*v/64,C=1-_+15*p/8-35*f/8,H=1-3*_+35*p/4,b=1-5*_,O=m*c-C*Math.sin(2*c)*_/2-H*Math.sin(4*c)*p/16-b*Math.sin(6*c)*f/48-5*Math.sin(8*c)*v/512,S=t._constants;S.a=i,S.b=n,S.f=e,S.cosineHeading=s,S.sineHeading=r,S.tanU=h,S.cosineU=o,S.sineU=d,S.sigma=c,S.sineAlpha=u,S.sineSquaredAlpha=M,S.cosineSquaredAlpha=g,S.cosineAlpha=l,S.u2Over4=_,S.u4Over16=p,S.u6Over64=f,S.u8Over256=v,S.a0=m,S.a1=C,S.a2=H,S.a3=b,S.distanceRatio=O}(t)}function c(t,i,s){var r=n.defaultValue(s,e.Ellipsoid.WGS84);this._ellipsoid=r,this._start=new a.Cartographic,this._end=new a.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,n.defined(t)&&n.defined(i)&&d(this,t,i,r)}Object.defineProperties(c.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),c.prototype.setEndPoints=function(t,a){d(this,t,a,this._ellipsoid)},c.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},c.prototype.interpolateUsingSurfaceDistance=function(t,i){var e=this._constants,s=e.distanceRatio+t/e.b,h=Math.cos(2*s),o=Math.cos(4*s),d=Math.cos(6*s),c=Math.sin(2*s),u=Math.sin(4*s),M=Math.sin(6*s),g=Math.sin(8*s),l=s*s,_=s*l,p=e.u8Over256,f=e.u2Over4,v=e.u6Over64,m=e.u4Over16,C=2*_*p*h/3+s*(1-f+7*m/4-15*v/4+579*p/64-(m-15*v/4+187*p/16)*h-(5*v/4-115*p/16)*o-29*p*d/16)+(f/2-m+71*v/32-85*p/16)*c+(5*m/16-5*v/4+383*p/96)*u-l*((v-11*p/2)*c+5*p*u/2)+(29*v/96-29*p/16)*M+539*p*g/1536,H=Math.asin(Math.sin(C)*e.cosineAlpha),b=Math.atan(e.a/e.b*Math.tan(H));C-=e.sigma;var O=Math.cos(2*e.sigma+C),S=Math.sin(C),q=Math.cos(C),U=e.cosineU*q,w=e.sineU*S,A=Math.atan2(S*e.sineHeading,U-w*e.cosineHeading)-r(e.f,e.sineAlpha,e.cosineSquaredAlpha,C,S,q,O);return n.defined(i)?(i.longitude=this._start.longitude+A,i.latitude=b,i.height=0,i):new a.Cartographic(this._start.longitude+A,b,0)},t.EllipsoidGeodesic=c}));
