define(["exports","./arrayFill-4513d7ad","./buildModuleUrl-3c901614","./Cartographic-bd336518","./ComponentDatatype-c140a87d","./when-b60132fc","./Check-7b2a090c","./Cartesian2-b18a5d2b","./GeometryAttribute-b4292e3e","./GeometryAttributes-252e9929","./GeometryOffsetAttribute-fbeb6f1a","./IndexDatatype-37eea762","./Math-09b0b739","./PrimitiveType-39acab88"],(function(i,t,e,a,r,n,o,s,m,u,f,l,d,c){"use strict";var C=new a.Cartesian3(1,1,1),_=Math.cos,b=Math.sin;function h(i){i=n.defaultValue(i,n.defaultValue.EMPTY_OBJECT);var t=n.defaultValue(i.radii,C),e=n.defaultValue(i.innerRadii,t),r=n.defaultValue(i.minimumClock,0),o=n.defaultValue(i.maximumClock,d.CesiumMath.TWO_PI),s=n.defaultValue(i.minimumCone,0),m=n.defaultValue(i.maximumCone,d.CesiumMath.PI),u=Math.round(n.defaultValue(i.stackPartitions,10)),f=Math.round(n.defaultValue(i.slicePartitions,8)),l=Math.round(n.defaultValue(i.subdivisions,128));this._radii=a.Cartesian3.clone(t),this._innerRadii=a.Cartesian3.clone(e),this._minimumClock=r,this._maximumClock=o,this._minimumCone=s,this._maximumCone=m,this._stackPartitions=u,this._slicePartitions=f,this._subdivisions=l,this._offsetAttribute=i.offsetAttribute,this._workerName="createEllipsoidOutlineGeometry"}h.packedLength=2*a.Cartesian3.packedLength+8,h.pack=function(i,t,e){return e=n.defaultValue(e,0),a.Cartesian3.pack(i._radii,t,e),e+=a.Cartesian3.packedLength,a.Cartesian3.pack(i._innerRadii,t,e),e+=a.Cartesian3.packedLength,t[e++]=i._minimumClock,t[e++]=i._maximumClock,t[e++]=i._minimumCone,t[e++]=i._maximumCone,t[e++]=i._stackPartitions,t[e++]=i._slicePartitions,t[e++]=i._subdivisions,t[e]=n.defaultValue(i._offsetAttribute,-1),t};var p=new a.Cartesian3,y=new a.Cartesian3,v={radii:p,innerRadii:y,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0,offsetAttribute:void 0};h.unpack=function(i,t,e){t=n.defaultValue(t,0);var r=a.Cartesian3.unpack(i,t,p);t+=a.Cartesian3.packedLength;var o=a.Cartesian3.unpack(i,t,y);t+=a.Cartesian3.packedLength;var s=i[t++],m=i[t++],u=i[t++],f=i[t++],l=i[t++],d=i[t++],c=i[t++],C=i[t];return n.defined(e)?(e._radii=a.Cartesian3.clone(r,e._radii),e._innerRadii=a.Cartesian3.clone(o,e._innerRadii),e._minimumClock=s,e._maximumClock=m,e._minimumCone=u,e._maximumCone=f,e._stackPartitions=l,e._slicePartitions=d,e._subdivisions=c,e._offsetAttribute=-1===C?void 0:C,e):(v.minimumClock=s,v.maximumClock=m,v.minimumCone=u,v.maximumCone=f,v.stackPartitions=l,v.slicePartitions=d,v.subdivisions=c,v.offsetAttribute=-1===C?void 0:C,new h(v))},h.createGeometry=function(i){var a=i._radii;if(!(a.x<=0||a.y<=0||a.z<=0)){var o=i._innerRadii;if(!(o.x<=0||o.y<=0||o.z<=0)){var C=i._minimumClock,h=i._maximumClock,p=i._minimumCone,y=i._maximumCone,v=i._subdivisions,k=s.Ellipsoid.fromCartesian3(a),A=i._slicePartitions+1,x=i._stackPartitions+1;(A=Math.round(A*Math.abs(h-C)/d.CesiumMath.TWO_PI))<2&&(A=2),(x=Math.round(x*Math.abs(y-p)/d.CesiumMath.PI))<2&&(x=2);var P=0,M=1,w=o.x!==a.x||o.y!==a.y||o.z!==a.z,g=!1,V=!1;w&&(M=2,p>0&&(g=!0,P+=A),y<Math.PI&&(V=!0,P+=A));var G,E,O,D,I=v*M*(x+A),T=new Float64Array(3*I),z=2*(I+P-(A+x)*M),L=l.IndexDatatype.createTypedArray(I,z),R=0,N=new Array(x),B=new Array(x);for(G=0;G<x;G++)D=p+G*(y-p)/(x-1),N[G]=b(D),B[G]=_(D);var S=new Array(v),U=new Array(v);for(G=0;G<v;G++)O=C+G*(h-C)/(v-1),S[G]=b(O),U[G]=_(O);for(G=0;G<x;G++)for(E=0;E<v;E++)T[R++]=a.x*N[G]*U[E],T[R++]=a.y*N[G]*S[E],T[R++]=a.z*B[G];if(w)for(G=0;G<x;G++)for(E=0;E<v;E++)T[R++]=o.x*N[G]*U[E],T[R++]=o.y*N[G]*S[E],T[R++]=o.z*B[G];for(N.length=v,B.length=v,G=0;G<v;G++)D=p+G*(y-p)/(v-1),N[G]=b(D),B[G]=_(D);for(S.length=A,U.length=A,G=0;G<A;G++)O=C+G*(h-C)/(A-1),S[G]=b(O),U[G]=_(O);for(G=0;G<v;G++)for(E=0;E<A;E++)T[R++]=a.x*N[G]*U[E],T[R++]=a.y*N[G]*S[E],T[R++]=a.z*B[G];if(w)for(G=0;G<v;G++)for(E=0;E<A;E++)T[R++]=o.x*N[G]*U[E],T[R++]=o.y*N[G]*S[E],T[R++]=o.z*B[G];for(R=0,G=0;G<x*M;G++){var F=G*v;for(E=0;E<v-1;E++)L[R++]=F+E,L[R++]=F+E+1}var W=x*v*M;for(G=0;G<A;G++)for(E=0;E<v-1;E++)L[R++]=W+G+E*A,L[R++]=W+G+(E+1)*A;if(w)for(W=x*v*M+A*v,G=0;G<A;G++)for(E=0;E<v-1;E++)L[R++]=W+G+E*A,L[R++]=W+G+(E+1)*A;if(w){var Y=x*v*M,J=Y+v*A;if(g)for(G=0;G<A;G++)L[R++]=Y+G,L[R++]=J+G;if(V)for(Y+=v*A-A,J+=v*A-A,G=0;G<A;G++)L[R++]=Y+G,L[R++]=J+G}var j=new u.GeometryAttributes({position:new m.GeometryAttribute({componentDatatype:r.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:T})});if(n.defined(i._offsetAttribute)){var q=T.length,H=new Uint8Array(q/3),K=i._offsetAttribute===f.GeometryOffsetAttribute.NONE?0:1;t.arrayFill(H,K),j.applyOffset=new m.GeometryAttribute({componentDatatype:r.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:H})}return new m.Geometry({attributes:j,indices:L,primitiveType:c.PrimitiveType.LINES,boundingSphere:e.BoundingSphere.fromEllipsoid(k),offsetAttribute:i._offsetAttribute})}}},i.EllipsoidOutlineGeometry=h}));
